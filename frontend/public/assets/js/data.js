//data.js
export const allPrices = [];

export const idToImageUrlMap = {
  288675:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288675-tMHMyEGyMP8nuu48yUjh----O1Bwk--Cyx0yBPTM2ECf9o-6703a9e27bbf0-small",
  288676:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288676-LkiXGYebdEaX--RUJaq2l04PIKSJi--tcLAaUBXNTI1U-66ea716671f24-small",
  288677:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288677-rCkI--xNnsESte1rQN98WY31nMYQuPH5xGUxyvbDY5tw-673b2a1bd0bf4-small",
  288678:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288678-A--tWrqARegRTL-2RMrLGiuzYjxwJ7VXusw50V3q2nT8-66ea7f21cb93c-small",
  288679:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288679-kYRi83cEVodJlttkVjDOkHz9--kEWPpobucqJJqTp6pg-6703a8cb33fdb-small",
  288681:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288681-YS----3Meex4Hw--KvvAOFBlymoz--lnqFYD1xXo7ij--TYw-66ea6e4e827d7-small",
  288682:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288682-evQp8OCJfjc5S-9AoIGCtd8x0QJIOjwawpfL7uUJicU-66ab84b3db366-small",
  288683:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288683-NBq45f409Fs9vTUhqB-nfNpwLffFhnNT0Dj-lrEAITw-6703b00ecc828-small",
  288684:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288684-u--npXAlak1KWOk0KLVUZ4NMedEzH7V7ajHnO7EOdpp8-66d9a6a46ff4d-small",
  288685:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288685-pgp1yeLWRh6MY7YcveUgB8NFH-saO-hllnG6iCA19a8-66e16e19b41ed-small",
  288686:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288686-wf6ctKIOinfYyoSLAgm5HB22rEaYp3AK3mNDscXvy4U-6703b3dfcbfea-small",
  288687:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288687-S18BbnTAlg7uL0ra6v7Hq6pf7LnRgKdDpriJ0phYwhU-66e3d17f80e2c-small",
  288688:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288688-7eZx1--qu6kw1rw5Jeo2R3qC4PKmGD0uGULZmim4HWM4-66e170a62bc05-small",
  288689:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288689-bCL--YmRc3H35JUjtzGVAgJj3adnBUg--fhIKfiz8MOrs-67a09ef08adba-small",
  288690:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288690-yK4nZYUVUq4ZG0zvV7dlgpPoMhl6QVUjTWYK3Sh3oBo-67122fcc6b26f-small",
  288691:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288691-Q558TtjQ31P7UXPSjlN4gbl0BDKNCRkeZPSYnquYGAk-66ea7bf9d9caf-small",
  288723:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288723-YPI4-HYu--DM4ziW7UTxU3GDIEslx6jWkegcYm-tFWYQ-67109a0d9190c-small",
  288724:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288724-InJpVvFspCMzKTbi2lVFhstYAh32G2YtOx6BZ3dCz54-6703ab9376ef0-small",
  288726:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288726-JpCHUfKpBKbpOxzaWNbJzT1lAzxW-h86OsmSbBJydDs-66bacf0767dc9-small",
  288977:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-288977-F13G8ZV1xQ5T1k--woGY5I7kpDrKsDCPNOFBpOfCOg2Y-66b60c031d9a5-small",
  305055:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-305055-1jZeW--yElJDlBUM9sTYq6p2AAU6s9Myyt6Yov8wboYs-66d6f352558a3-small",
  305069:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-305069-1Bgd8QKJbDi-0PLPJmwh3RrFy0C3NpGhYb6aZkSUXUo-66d5963a43a82-small",
  305327:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-305327-amUVjJHDRxFhkgR7yl3F76zrCVd9LA2Tv5HQvoo3CL0-675943a1b674e-small",
  306032:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-306032-UAIH-2zPCza8C8oHi1-Ynth3ncLy69Rey--W7AOpJ8rY-66d97d55787e3-small",
  306543:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-306543-BkpdxPOXsQkuiurqt7duMHqmEcVsz7z-FkJHg7vASow-6703b16cc45e2-small",
  307143:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-307143-3H4Z---1QKORHRB0PmQUeHDb--JYWvqsXBEcV88fDIRHU-66ea82e905eeb-small",
  309909:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-309909-t5tvkyH3zdazAH9674KN6BlytU4hIyXfzswqn3--TSqg-6703b8811c802-small",
  323227:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-323227-XjKjGStpB2V5qoqDMiSjICKKRE0LjGGiZqKE--oDbxnU-6724939334f28-small",
  323229:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-323229-R8nXr0FpgtN-KOKcwGhImqJaVde5Aj4sANCHug7J9oI-67284ff1c970e-small",
  323258:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-323258-S6Cl5b28EAI6rggA1AKTeteuxZOMRjVDRtXquj6XOy4-6728765e95b20-small",
  323261:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-323261-a3zLzj8FVe96OalhinxdQoxEApvt0VVFZ0wIzxE01-A-67285137260ac-small",
  336255:
    "https://hostaway-platform.s3.us-west-2.amazonaws.com/listing/80066-336255-uIRNwEnXNYD-hjk4oZAG6ESB0VQKEfmCNdpjoEtoyTU-674eb1fae01c1-small",
};
export const roomDescriptions = [
  "Experience the ultimate luxury in our spacious suite, featuring elegant decor and modern amenities.",
  "Enjoy a cozy and comfortable stay in this beautifully designed room, perfect for relaxation.",
  "Indulge in style and sophistication with our premium room offering stunning views and top-notch facilities.",
  "Discover tranquility in our deluxe room with panoramic city views and premium furnishings.",
  "Unwind in our executive suite featuring a private balcony and contemporary design elements.",
  "Experience modern comfort in our urban retreat with state-of-the-art technology and elegant finishes.",
  "Relax in our garden-view room offering a peaceful atmosphere and luxurious amenities.",
  "Stay in our premium suite with separate living area and stunning architectural details.",
  "Enjoy our boutique-style room with custom furniture and artistic touches throughout.",
  "Experience our signature suite featuring floor-to-ceiling windows and designer furnishings.",
  "Rest in our deluxe corner room offering expanded views and enhanced privacy.",
  "Discover our modern loft-style suite with high ceilings and contemporary artwork.",
  "Unwind in our premium king room with custom bedding and elegant bathroom fixtures.",
  "Stay in our executive deluxe room featuring a work area and relaxation space.",
  "Experience our luxury suite with separate dining area and premium entertainment system.",
  "Enjoy our family suite with connecting rooms and comfortable living space.",
  "Relax in our premium double room with city skyline views and modern amenities.",
  "Stay in our deluxe suite with upgraded features and luxurious bathroom.",
  "Experience our courtyard-view room with peaceful atmosphere and elegant decor.",
  "Discover our premium king suite with separate seating area and work desk.",
  "Unwind in our executive room featuring business amenities and comfortable lounging area.",
  "Enjoy our deluxe suite with panoramic views and premium entertainment options.",
  "Rest in our signature king room with custom furnishings and modern technology.",
  "Stay in our premium double suite with expanded living space and city views.",
  "Experience our luxury corner suite with wraparound windows and elegant design.",
  "Relax in our executive king room with enhanced amenities and work space.",
  "Discover our premium suite with separate bedroom and living room areas.",
  "Unwind in our deluxe room featuring modern decor and comfortable seating.",
  "Enjoy our boutique suite with unique design elements and luxury finishes.",
  "Stay in our executive suite with business facilities and relaxation space.",
  "Experience our premium room with city views and contemporary styling.",
  "Rest in our signature suite with upgraded amenities and elegant atmosphere.",
  "Stay in our deluxe penthouse with breathtaking city skyline views and top-tier luxury.",
  "Experience the charm of our heritage suite, blending classic elegance with modern comforts.",
  "Relax in our waterfront suite, offering stunning views and a serene atmosphere.",
  "Unwind in our spa-inspired suite with a private jacuzzi and wellness amenities.",
  "Enjoy our rooftop terrace suite, featuring an expansive outdoor space and panoramic cityscapes.",
  "Stay in our ultra-modern smart room, equipped with cutting-edge automation and personalized settings.",
  "Experience rustic charm in our countryside retreat, surrounded by nature and tranquility.",
  "Rest in our artist's loft, featuring curated artwork, high ceilings, and a creative ambiance.",
  "Discover our tropical oasis suite, adorned with lush greenery and resort-style furnishings.",
  "Relax in our grand suite with an opulent four-poster bed and lavish decor.",
  "Unwind in our sunlit atrium room, designed to enhance natural light and spaciousness.",
  "Stay in our cinematic suite, complete with an in-room home theater system for ultimate entertainment.",
  "Experience unparalleled elegance in our imperial suite, featuring handcrafted furnishings and bespoke service.",
  "Discover our enchanted forest room, a nature-inspired sanctuary with botanical elements.",
  "Relax in our lagoon-view villa, offering exclusive access to a tranquil water escape.",
  "Unwind in our yacht-inspired suite, designed with nautical decor and oceanic ambiance.",
  "Enjoy our ultra-luxury estate suite, featuring private butler service and VIP amenities.",
];

// Add a mapping for virtual tour links
export const virtualTourLinks = {
  323227: "https://virtualtour4f-42.netlify.app/",
  // 288675: "https://example.com/virtual-tour-288675",
  // 288676: "https://example.com/virtual-tour-288676",
  // ...
};


export const LISTINGS = [
  { id: 288675, price: allPrices[0] },
  { id: 288682, price: allPrices[1] },
  { id: 288690, price: allPrices[2] },
  { id: 323229, price: allPrices[3] },
  { id: 323261, price: allPrices[4] },
  { id: 336255, price: allPrices[5] }, // Studio
  { id: 307143, price: allPrices[6] },
  { id: 306032, price: allPrices[7] },
  { id: 288691, price: allPrices[8] },
  { id: 305069, price: allPrices[9] },
  { id: 288681, price: allPrices[10] },
  { id: 288726, price: allPrices[11] },
  { id: 288679, price: allPrices[12] },
  { id: 288723, price: allPrices[13] },
  { id: 288678, price: allPrices[14] },
  { id: 323258, price: allPrices[15] }, // 1BR
  { id: 288677, price: allPrices[16] },
  { id: 288684, price: allPrices[17] },
  { id: 288687, price: allPrices[18] },
  { id: 288977, price: allPrices[19] },
  { id: 288689, price: allPrices[20] },
  { id: 288685, price: allPrices[21] },
  { id: 288683, price: allPrices[22] },
  { id: 306543, price: allPrices[23] },
  { id: 288724, price: allPrices[24] }, // 2BR
  { id: 305055, price: allPrices[25] },
  { id: 309909, price: allPrices[26] },
  { id: 323227, price: allPrices[27] },
  { id: 288688, price: allPrices[28] }, // 2BR Premium
  { id: 288686, price: allPrices[29] },
  { id: 305327, price: allPrices[30] },
  { id: 288676, price: allPrices[31] }, // 3BR
];

// Add the same pricing and listings data structure
export const BASE_PRICES = {
  Studio: 40,
  "1BR": 48,
  "2BR": 57,
  "2BR Premium": 78,
  "3BR": 65,
};

export const LISTINGS_DATA = {
  Studio: [288675, 288682, 288690, 323229, 323261, 336255],
  "1BR": [
    307143, 306032, 288691, 305069, 288681, 288726, 288679, 288723, 288678,
    323258,
  ],
  "2BR": [
    288677, 288684, 288687, 288977, 288689, 288685, 288683, 306543, 288724,
  ],
  "2BR Premium": [305055, 309909, 323227, 288688],
  "3BR": [288686, 305327, 288676],
};

// Add guest capacity mapping
export const ROOM_DETAILS = {
  Studio: {
    guests: "1-2",
    beds: "1",
  },
  "1BR": {
    guests: "1-3",
    beds: "1",
  },
  "2BR": {
    guests: "1-4",
    beds: "2",
  },
  "2BR Premium": {
    guests: "1-4",
    beds: "2",
  },
  "3BR": {
    guests: "1-6",
    beds: "3",
  },
};

async function fetchListingsPrices() {
  const token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI4MDA2NiIsImp0aSI6ImE0OTkzMDcyMzdiNmQyODA2M2NlYzYwZjUzM2RmYTM1NTU4ZjU0Yzc4OTJhMTk5MmFkZGNhYjZlZWE5NTE1MzFjMDYwM2UzMGI5ZjczZDRhIiwiaWF0IjoxNzM5MjcwMjM2LjA0NzE4LCJuYmYiOjE3MzkyNzAyMzYuMDQ3MTgyLCJleHAiOjIwNTQ4MDMwMzYuMDQ3MTg2LCJzdWIiOiIiLCJzY29wZXMiOlsiZ2VuZXJhbCJdLCJzZWNyZXRJZCI6NTI0OTJ9.n_QTZxeFcJn121EGofg290ReOoNE7vMJAE4-lnXhNbLCZw0mIJu1KQWE5pM0xPUcUHeJ-7XTQfS0U5yIkabGi7vGGex0yx9A0h03fn7ZBAtCzPLq_Xmj8ZOdHzahpRqxRsNRRNOlnbttTSrpSo4NJCdK6yhMTKrKkTTVh60IJIc';
  
  try {
    const today = new Date().toISOString().split('T')[0];
    // console.log('Fetching prices for:', today);

    const listingIds = LISTINGS.map(listing => listing.id);
    
    // Fetch all listing prices in parallel
    const fetchPromises = listingIds.map(async listingId => {
      try {
        const response = await fetch(`https://api.hostaway.com/v1/listings/${listingId}/calendar`, {
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });

        if (!response.ok) {
          console.warn(`Failed to fetch calendar for listing ${listingId}: ${response.status}`);
          return null;
        }

        const data = await response.json();
        
        let todayPrice = 
          data.dates?.find(date => date.date === today)?.price ||
          data.result?.find(date => date.date === today)?.price ||
          data.calendar?.find(date => date.date === today)?.price;

        return todayPrice !== undefined ? { listingId, price: todayPrice } : null;
      } catch (error) {
        console.error(`Error fetching calendar for listing ${listingId}:`, error);
        return null;
      }
    });

    // Wait for all fetches to complete
    const allPrices = (await Promise.all(fetchPromises)).filter(Boolean);

    // ✅ **Update LISTINGS with the latest prices**
    LISTINGS.forEach(listing => {
      const priceData = allPrices.find(p => p.listingId === listing.id);
      if (priceData) {
        listing.price = priceData.price;
      }
    });

    // ✅ **Log Price Summary**
    // const pricesSummary = LISTINGS.map(listing => `${listing.id}: ${listing.price}`);
    // console.log('Updated Price Summary:\n', pricesSummary.join('\n'));

  } catch (error) {
    console.error('Error fetching listings prices:', error);
  }
}

// Call the function
fetchListingsPrices();